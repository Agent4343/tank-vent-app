# C-NLOPB Tank Ventilation App – Requirements (for Developers)
# ===========================================================
#
# Functional Requirements
# -----------------------
# 1. User Inputs
#    - Tank orientation: Vertical or Horizontal
#    - Dimensions: diameter, height, and/or length (ft)
#    - Air changes per hour (ACH)
#    - Target duct face velocity (fpm)
#    - Streamline parameters: random seed, resolution, number of seeds
#    - Inlet/outlet 3D coordinates via sliders (X, Y, Z)
#
# 2. Derived Calculations
#    - Tank volume (ft³)
#    - Required airflow: CFH, CFM
#    - Vent diameter (inches) from flow and velocity
#    - Visualization dimensions (L, D, H)
#
# 3. Flow Field Simulation
#    - Generate 3D velocity field using source–sink model
#    - Compute vectors on points for accurate streamlines
#    - Adjustable resolution for performance tuning
#    - Randomized streamline seeds near inlet
#
# 4. Visualization
#    - 3D PyVista tank cylinder (orientation based on selection)
#    - Streamlines (orange), inlet (red), outlet (blue)
#    - Embedded viewer with stpyvista
#    - Optional PNG export of rendered scene
#
# 5. Performance Controls
#    - Grid resolution (12–48)
#    - Streamline seeds (40–300)
#    - Random seed for deterministic results
#
# 6. Coverage Analysis
#    - Outlet-reach coverage: % of streamlines within outlet tolerance
#    - Speed coverage: % of domain with >30th percentile speed
#
# 7. Compliance Logic
#    - “Compliant” if outlet coverage ≥ 85%
#
# 8. Reporting
#    - Generates .txt report with tank data, flow metrics, coverage, compliance
#    - Optional .png visualization download
#
# 9. Streamlit Layout
#    - Two-column layout for inputs and visualization settings
#    - Metrics for key outputs: Volume, Flow, Duct Ø, Coverage
#    - Markdown headers for clear sectioning
#
#
# Technical Requirements
# ----------------------
# - Libraries: streamlit, numpy, pyvista, stpyvista
# - Headless rendering: pv.OFF_SCREEN = True
# - Use float32 for PyVista data
# - Orientation logic: direction=(1,0,0) when horizontal
# - Units: Imperial (ft, ft³, CFM, CFH, in)
# - Coverage threshold: 85% minimum
#
#
# Optional Enhancements
# ---------------------
# - SI (metric) toggle mode
# - Air density correction for humidity/temperature
# - Multi-inlet/outlet capability
# - Auto-optimized vent placement based on flow coverage
# - PDF/Excel export options
